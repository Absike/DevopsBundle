<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>

        <!-- container -->

        <service id="fansible_devops.generator.container" class="Fansible\DevopsBundle\Generator\Helper\GeneratorContainer" />

        <!-- helper -->

        <service id="fansible_devops.generator.helper.twig" class="Fansible\DevopsBundle\Generator\Helper\TwigHelper">
            <argument type="service" id="twig" />
            <argument>%kernel.root_dir%</argument>
            <argument>%fansible_devops.data.provisioning_path%</argument>
        </service>

        <!-- generator -->

        <service id="fansible_devops.generator.vagrantfile" class="Fansible\DevopsBundle\Generator\VagrantfileGenerator">
            <argument type="service" id="fansible_devops.config.vagrant" />
            <argument type="service" id="fansible_devops.generator.helper.twig" />
            <tag name="fansible_devops.generator" />
        </service>

        <!-- ansible -->

        <service id="fansible_devops.generator.ansible.ansible_cfg" class="Fansible\DevopsBundle\Generator\Ansible\AnsibleCfgGenerator">
            <argument type="service" id="fansible_devops.generator.helper.twig" />
            <argument type="service" id="fansible_devops.config.services" />
            <tag name="fansible_devops.generator" />
        </service>
        <service id="fansible_devops.generator.ansible.hosts" class="Fansible\DevopsBundle\Generator\Ansible\HostsGenerator">
            <argument type="service" id="fansible_devops.generator.helper.twig" />
            <argument type="service" id="fansible_devops.config.services" />
            <argument type="service" id="fansible_devops.config.environments" />
            <tag name="fansible_devops.generator" />
        </service>
        <service id="fansible_devops.generator.ansible.playbook" class="Fansible\DevopsBundle\Generator\Ansible\PlaybookGenerator">
            <argument type="service" id="fansible_devops.generator.helper.twig" />
            <argument type="service" id="fansible_devops.config.services" />
            <argument type="service" id="fansible_devops.config.ansible_roles" />
            <tag name="fansible_devops.generator" />
        </service>
        <service id="fansible_devops.generator.ansible.requirements" class="Fansible\DevopsBundle\Generator\Ansible\RequirementsGenerator">
            <argument type="service" id="fansible_devops.generator.helper.twig" />
            <argument type="service" id="fansible_devops.config.services" />
            <argument type="service" id="fansible_devops.config.ansible_roles" />
            <tag name="fansible_devops.generator" />
        </service>

        <!-- ansible roles -->

        <service id="fansible_devops.generator.ansible.role.mysql" class="Fansible\DevopsBundle\Generator\Ansible\Roles\MysqlGenerator">
            <argument type="service" id="fansible_devops.generator.helper.twig" />
            <argument type="service" id="fansible_devops.config.services" />
            <argument type="service" id="fansible_devops.config.database" />
            <tag name="fansible_devops.generator" />
        </service>

        <service id="fansible_devops.generator.ansible.role.apache" class="Fansible\DevopsBundle\Generator\Ansible\Roles\ApacheGenerator">
            <argument type="service" id="fansible_devops.generator.helper.twig" />
            <argument type="service" id="fansible_devops.config.services" />
            <argument type="service" id="fansible_devops.config.webserver" />
            <tag name="fansible_devops.generator" />
        </service>

    </services>

</container>
